<script lang="ts">
import { defineComponent, ref } from 'vue';
import RecipePreview from '../components/RecipePreview.vue';
import axios from 'axios';

    export default defineComponent({
        setup: ()=>{
        
        },
        data: () => {
            return{
                //searchResults: [],
                searchResults: [{"id":401739,"title":"Ginger Sesame Salad w/ Chicken","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Calcium","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Carbohydrates","amount":19.0,"unit":"g","percentOfDailyNeeds":6.33},{"name":"Cholesterol","amount":35.0,"unit":"mg","percentOfDailyNeeds":11.67},{"name":"Calories","amount":300.0,"unit":"kcal","percentOfDailyNeeds":15.0},{"name":"Fat","amount":19.0,"unit":"g","percentOfDailyNeeds":29.23},{"name":"Saturated Fat","amount":2.5,"unit":"g","percentOfDailyNeeds":15.63},{"name":"Trans Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Fiber","amount":3.0,"unit":"g","percentOfDailyNeeds":12.0},{"name":"Iron","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Protein","amount":14.0,"unit":"g","percentOfDailyNeeds":28.0},{"name":"Sodium","amount":560.0,"unit":"mg","percentOfDailyNeeds":24.35},{"name":"Sugar","amount":9.0,"unit":"g","percentOfDailyNeeds":10.0},{"name":"Vitamin A","amount":0.0,"unit":"IU","percentOfDailyNeeds":0.0},{"name":"Vitamin C","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Net Carbohydrates","amount":16.0,"unit":"g","percentOfDailyNeeds":5.82}],"caloricBreakdown":{"percentProtein":18.48,"percentFat":56.44,"percentCarbs":25.08},"calories":300.0,"fat":"19g","protein":"14g","carbs":"19g"},"images":["https://images.spoonacular.com/file/wximages/401739-90x90.jpg","https://images.spoonacular.com/file/wximages/401739-312x231.jpg","https://images.spoonacular.com/file/wximages/401739-636x393.jpg"],"servingSize":"1 serving","readableServingSize":"1 serving","numberOfServings":1.0,"servings":{"number":1.0,"size":1.0,"unit":"serving"},"spoonacularScore":null,"breadcrumbs":["salad","side dish","menu item type"],"image":"https://images.spoonacular.com/file/wximages/401739-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"Mama Fu's"},{"id":402153,"title":"Evolution Salad w/ 1 fl oz Ginger Tamari Vinaigrette","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Calcium","amount":100.0,"unit":"mg","percentOfDailyNeeds":10.0},{"name":"Carbohydrates","amount":10.0,"unit":"g","percentOfDailyNeeds":3.33},{"name":"Cholesterol","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Calories","amount":150.0,"unit":"kcal","percentOfDailyNeeds":7.5},{"name":"Fat","amount":12.0,"unit":"g","percentOfDailyNeeds":18.46},{"name":"Saturated Fat","amount":1.0,"unit":"g","percentOfDailyNeeds":6.25},{"name":"Trans Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Fiber","amount":5.0,"unit":"g","percentOfDailyNeeds":20.0},{"name":"Iron","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Protein","amount":2.0,"unit":"g","percentOfDailyNeeds":4.0},{"name":"Sodium","amount":250.0,"unit":"mg","percentOfDailyNeeds":10.87},{"name":"Sugar","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Vitamin A","amount":0.0,"unit":"IU","percentOfDailyNeeds":0.0},{"name":"Vitamin C","amount":11.55,"unit":"mg","percentOfDailyNeeds":14.0},{"name":"Net Carbohydrates","amount":5.0,"unit":"g","percentOfDailyNeeds":1.82}],"caloricBreakdown":{"percentProtein":5.13,"percentFat":69.23,"percentCarbs":25.64},"calories":150.0,"fat":"12g","protein":"2g","carbs":"10g"},"images":["https://images.spoonacular.com/file/wximages/402153-90x90.jpg","https://images.spoonacular.com/file/wximages/402153-312x231.jpg","https://images.spoonacular.com/file/wximages/402153-636x393.jpg"],"servingSize":"1 serving","readableServingSize":"1 serving","numberOfServings":1.0,"servings":{"number":1.0,"size":1.0,"unit":"serving"},"spoonacularScore":null,"breadcrumbs":["salad","side dish","menu item type"],"image":"https://images.spoonacular.com/file/wximages/402153-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"American Flatbread"},{"id":234892,"title":"Gingerbread Pumpkin Baby Bundt Cake","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Calcium","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Carbohydrates","amount":88.0,"unit":"g","percentOfDailyNeeds":29.33},{"name":"Cholesterol","amount":45.0,"unit":"mg","percentOfDailyNeeds":15.0},{"name":"Calories","amount":510.0,"unit":"kcal","percentOfDailyNeeds":25.5},{"name":"Fat","amount":17.0,"unit":"g","percentOfDailyNeeds":26.15},{"name":"Saturated Fat","amount":2.5,"unit":"g","percentOfDailyNeeds":15.63},{"name":"Trans Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Fiber","amount":1.0,"unit":"g","percentOfDailyNeeds":4.0},{"name":"Iron","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Protein","amount":5.0,"unit":"g","percentOfDailyNeeds":10.0},{"name":"Sodium","amount":390.0,"unit":"mg","percentOfDailyNeeds":16.96},{"name":"Sugar","amount":68.0,"unit":"g","percentOfDailyNeeds":75.56},{"name":"Vitamin A","amount":0.0,"unit":"IU","percentOfDailyNeeds":0.0},{"name":"Vitamin C","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Net Carbohydrates","amount":87.0,"unit":"g","percentOfDailyNeeds":31.64}],"caloricBreakdown":{"percentProtein":3.81,"percentFat":29.14,"percentCarbs":67.05},"calories":510.0,"fat":"17g","protein":"5g","carbs":"88g"},"images":["https://images.spoonacular.com/file/wximages/234892-90x90.jpg","https://images.spoonacular.com/file/wximages/234892-312x231.jpg","https://images.spoonacular.com/file/wximages/234892-636x393.jpg"],"servingSize":"1 serving","readableServingSize":"1 serving","numberOfServings":1.0,"servings":{"number":1.0,"size":1.0,"unit":"serving"},"spoonacularScore":null,"breadcrumbs":["bundt cake","cake","dessert","menu item type"],"image":"https://images.spoonacular.com/file/wximages/234892-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"Corner Bakery"},{"id":360513,"title":"Hot Gingerbread Cookie Latte w/ Soy","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Calcium","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Carbohydrates","amount":46.0,"unit":"g","percentOfDailyNeeds":15.33},{"name":"Cholesterol","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Calories","amount":260.0,"unit":"kcal","percentOfDailyNeeds":13.0},{"name":"Fat","amount":5.0,"unit":"g","percentOfDailyNeeds":7.69},{"name":"Saturated Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Trans Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Fiber","amount":2.0,"unit":"g","percentOfDailyNeeds":8.0},{"name":"Iron","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Protein","amount":8.0,"unit":"g","percentOfDailyNeeds":16.0},{"name":"Sodium","amount":348.0,"unit":"mg","percentOfDailyNeeds":15.13},{"name":"Sugar","amount":43.0,"unit":"g","percentOfDailyNeeds":47.78},{"name":"Vitamin A","amount":0.0,"unit":"IU","percentOfDailyNeeds":0.0},{"name":"Vitamin C","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Net Carbohydrates","amount":44.0,"unit":"g","percentOfDailyNeeds":16.0}],"caloricBreakdown":{"percentProtein":12.26,"percentFat":17.24,"percentCarbs":70.5},"calories":260.0,"fat":"5g","protein":"8g","carbs":"46g"},"images":["https://images.spoonacular.com/file/wximages/360513-90x90.png","https://images.spoonacular.com/file/wximages/360513-312x231.png","https://images.spoonacular.com/file/wximages/360513-636x393.png"],"servingSize":"16oz","readableServingSize":"16 fl oz","numberOfServings":1.0,"servings":{"number":1.0,"size":16.0,"unit":"oz"},"spoonacularScore":null,"breadcrumbs":["lattes","premade coffee drink","hot beverage","beverage","menu item type"],"image":"https://images.spoonacular.com/file/wximages/360513-312x231.png","imageType":"png","generatedText":null,"restaurantChain":"Scooter's Coffee And Yogurt"},{"id":360511,"title":"Hot Gingerbread Cookie Latte w/ Skim Milk","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Calcium","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Carbohydrates","amount":43.0,"unit":"g","percentOfDailyNeeds":14.33},{"name":"Cholesterol","amount":12.0,"unit":"mg","percentOfDailyNeeds":4.0},{"name":"Calories","amount":245.0,"unit":"kcal","percentOfDailyNeeds":12.25},{"name":"Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Saturated Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Trans Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Fiber","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Iron","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Protein","amount":12.0,"unit":"g","percentOfDailyNeeds":24.0},{"name":"Sodium","amount":180.0,"unit":"mg","percentOfDailyNeeds":7.83},{"name":"Sugar","amount":43.0,"unit":"g","percentOfDailyNeeds":47.78},{"name":"Vitamin A","amount":0.0,"unit":"IU","percentOfDailyNeeds":0.0},{"name":"Vitamin C","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Net Carbohydrates","amount":43.0,"unit":"g","percentOfDailyNeeds":15.64}],"caloricBreakdown":{"percentProtein":21.82,"percentFat":0.0,"percentCarbs":78.18},"calories":245.0,"fat":"0g","protein":"12g","carbs":"43g"},"images":["https://images.spoonacular.com/file/wximages/360511-90x90.png","https://images.spoonacular.com/file/wximages/360511-312x231.png","https://images.spoonacular.com/file/wximages/360511-636x393.png"],"servingSize":"16oz","readableServingSize":"16 fl oz","numberOfServings":1.0,"servings":{"number":1.0,"size":16.0,"unit":"oz"},"spoonacularScore":null,"breadcrumbs":["lattes","premade coffee drink","hot beverage","beverage","menu item type"],"image":"https://images.spoonacular.com/file/wximages/360511-312x231.png","imageType":"png","generatedText":null,"restaurantChain":"Scooter's Coffee And Yogurt"},{"id":254073,"title":"Ginger Chicken w/ Broccoli","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Carbohydrates","amount":38.0,"unit":"g","percentOfDailyNeeds":12.67},{"name":"Calories","amount":470.0,"unit":"kcal","percentOfDailyNeeds":23.5},{"name":"Fat","amount":11.0,"unit":"g","percentOfDailyNeeds":16.92},{"name":"Saturated Fat","amount":2.0,"unit":"g","percentOfDailyNeeds":12.5},{"name":"Fiber","amount":8.0,"unit":"g","percentOfDailyNeeds":32.0},{"name":"Protein","amount":59.0,"unit":"g","percentOfDailyNeeds":118.0},{"name":"Sodium","amount":2330.0,"unit":"mg","percentOfDailyNeeds":101.3},{"name":"Net Carbohydrates","amount":30.0,"unit":"g","percentOfDailyNeeds":10.91}],"caloricBreakdown":{"percentProtein":48.46,"percentFat":20.33,"percentCarbs":31.21},"calories":470.0,"fat":"11g","protein":"59g","carbs":"38g"},"images":["https://images.spoonacular.com/file/wximages/254073-90x90.jpg","https://images.spoonacular.com/file/wximages/254073-312x231.jpg","https://images.spoonacular.com/file/wximages/254073-636x393.jpg"],"servingSize":null,"readableServingSize":null,"numberOfServings":null,"servings":{"number":1.0,"size":null,"unit":null},"spoonacularScore":null,"breadcrumbs":["chicken","chicken","poultry","meat"],"image":"https://images.spoonacular.com/file/wximages/254073-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"PF Chang's"},{"id":254076,"title":"Ginger Chicken w/ Broccoli, Gluten Free","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Carbohydrates","amount":40.0,"unit":"g","percentOfDailyNeeds":13.33},{"name":"Calories","amount":510.0,"unit":"kcal","percentOfDailyNeeds":25.5},{"name":"Fat","amount":14.0,"unit":"g","percentOfDailyNeeds":21.54},{"name":"Saturated Fat","amount":2.5,"unit":"g","percentOfDailyNeeds":15.63},{"name":"Fiber","amount":8.0,"unit":"g","percentOfDailyNeeds":32.0},{"name":"Protein","amount":60.0,"unit":"g","percentOfDailyNeeds":120.0},{"name":"Sodium","amount":2510.0,"unit":"mg","percentOfDailyNeeds":109.13},{"name":"Net Carbohydrates","amount":32.0,"unit":"g","percentOfDailyNeeds":11.64}],"caloricBreakdown":{"percentProtein":45.63,"percentFat":23.95,"percentCarbs":30.42},"calories":510.0,"fat":"14g","protein":"60g","carbs":"40g"},"images":["https://images.spoonacular.com/file/wximages/254076-90x90.jpg","https://images.spoonacular.com/file/wximages/254076-312x231.jpg","https://images.spoonacular.com/file/wximages/254076-636x393.jpg"],"servingSize":null,"readableServingSize":null,"numberOfServings":null,"servings":{"number":1.0,"size":null,"unit":null},"spoonacularScore":null,"breadcrumbs":["chicken","chicken","poultry","meat"],"image":"https://images.spoonacular.com/file/wximages/254076-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"PF Chang's"},{"id":254074,"title":"Ginger Chicken w/ Broccoli & White Rice Lunch","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Carbohydrates","amount":90.0,"unit":"g","percentOfDailyNeeds":30.0},{"name":"Calories","amount":570.0,"unit":"kcal","percentOfDailyNeeds":28.5},{"name":"Fat","amount":9.0,"unit":"g","percentOfDailyNeeds":13.85},{"name":"Saturated Fat","amount":1.5,"unit":"g","percentOfDailyNeeds":9.38},{"name":"Fiber","amount":6.0,"unit":"g","percentOfDailyNeeds":24.0},{"name":"Protein","amount":37.0,"unit":"g","percentOfDailyNeeds":74.0},{"name":"Sodium","amount":1220.0,"unit":"mg","percentOfDailyNeeds":53.04},{"name":"Net Carbohydrates","amount":84.0,"unit":"g","percentOfDailyNeeds":30.55}],"caloricBreakdown":{"percentProtein":25.13,"percentFat":13.75,"percentCarbs":61.12},"calories":570.0,"fat":"9g","protein":"37g","carbs":"90g"},"images":["https://images.spoonacular.com/file/wximages/254074-90x90.jpg","https://images.spoonacular.com/file/wximages/254074-312x231.jpg","https://images.spoonacular.com/file/wximages/254074-636x393.jpg"],"servingSize":null,"readableServingSize":null,"numberOfServings":null,"servings":{"number":1.0,"size":null,"unit":null},"spoonacularScore":null,"breadcrumbs":["chicken","chicken","poultry","meat"],"image":"https://images.spoonacular.com/file/wximages/254074-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"PF Chang's"},{"id":254075,"title":"Ginger Chicken w/ Broccoli & White Rice Lunch, Gluten Free","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Carbohydrates","amount":90.0,"unit":"g","percentOfDailyNeeds":30.0},{"name":"Calories","amount":570.0,"unit":"kcal","percentOfDailyNeeds":28.5},{"name":"Fat","amount":9.0,"unit":"g","percentOfDailyNeeds":13.85},{"name":"Saturated Fat","amount":1.5,"unit":"g","percentOfDailyNeeds":9.38},{"name":"Fiber","amount":6.0,"unit":"g","percentOfDailyNeeds":24.0},{"name":"Protein","amount":38.0,"unit":"g","percentOfDailyNeeds":76.0},{"name":"Sodium","amount":1310.0,"unit":"mg","percentOfDailyNeeds":56.96},{"name":"Net Carbohydrates","amount":84.0,"unit":"g","percentOfDailyNeeds":30.55}],"caloricBreakdown":{"percentProtein":25.63,"percentFat":13.66,"percentCarbs":60.71},"calories":570.0,"fat":"9g","protein":"38g","carbs":"90g"},"images":["https://images.spoonacular.com/file/wximages/254075-90x90.jpg","https://images.spoonacular.com/file/wximages/254075-312x231.jpg","https://images.spoonacular.com/file/wximages/254075-636x393.jpg"],"servingSize":null,"readableServingSize":null,"numberOfServings":null,"servings":{"number":1.0,"size":null,"unit":null},"spoonacularScore":null,"breadcrumbs":["chicken","chicken","poultry","meat"],"image":"https://images.spoonacular.com/file/wximages/254075-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"PF Chang's"},{"id":360730,"title":"GF Ginger Chicken w/ Broccoli","price":null,"likes":0.0,"badges":[],"nutrition":{"nutrients":[{"name":"Calcium","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Carbohydrates","amount":40.0,"unit":"g","percentOfDailyNeeds":13.33},{"name":"Cholesterol","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Calories","amount":510.0,"unit":"kcal","percentOfDailyNeeds":25.5},{"name":"Fat","amount":14.0,"unit":"g","percentOfDailyNeeds":21.54},{"name":"Saturated Fat","amount":2.5,"unit":"g","percentOfDailyNeeds":15.63},{"name":"Trans Fat","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Fiber","amount":8.0,"unit":"g","percentOfDailyNeeds":32.0},{"name":"Iron","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Protein","amount":60.0,"unit":"g","percentOfDailyNeeds":120.0},{"name":"Sodium","amount":2510.0,"unit":"mg","percentOfDailyNeeds":109.13},{"name":"Sugar","amount":0.0,"unit":"g","percentOfDailyNeeds":0.0},{"name":"Vitamin A","amount":0.0,"unit":"IU","percentOfDailyNeeds":0.0},{"name":"Vitamin C","amount":0.0,"unit":"mg","percentOfDailyNeeds":0.0},{"name":"Net Carbohydrates","amount":32.0,"unit":"g","percentOfDailyNeeds":11.64}],"caloricBreakdown":{"percentProtein":45.63,"percentFat":23.95,"percentCarbs":30.42},"calories":510.0,"fat":"14g","protein":"60g","carbs":"40g"},"images":["https://images.spoonacular.com/file/wximages/360730-90x90.jpg","https://images.spoonacular.com/file/wximages/360730-312x231.jpg","https://images.spoonacular.com/file/wximages/360730-636x393.jpg"],"servingSize":"1 serving","readableServingSize":"1 serving","numberOfServings":1.0,"servings":{"number":1.0,"size":1.0,"unit":"serving"},"spoonacularScore":null,"breadcrumbs":["chicken","chicken","poultry","meat"],"image":"https://images.spoonacular.com/file/wximages/360730-312x231.jpg","imageType":"jpg","generatedText":null,"restaurantChain":"PF Chang's"}],
                searchQuery : ''
            }
        },
        components: {
            RecipePreview
        },
        updated: async function(){
            var prevQuery = this.searchQuery;
            this.searchQuery = this.$route.query.query;
            if(this.searchQuery == '' || this.searchQuery == prevQuery) return ;
            this.doSearch()
        },
        methods: {
            async doSearch(){
                //var res = await axios.get(`https://api.spoonacular.com/food/menuItems/search?query=${this.searchQuery}&apiKey=${import.meta.env.VITE_API_KEY}`);
                //this.searchResults = res.data.menuItems;
            }
        }

    })
</script>
<template>
    <h1 class="text-2xl">You Searched: </h1>
    <h2 class="text-xl">{{searchQuery}}</h2>
    <div >
        <RecipePreview v-for="res in searchResults" :recipe="res" :key="res.id"></RecipePreview>
    </div>
    
</template>
